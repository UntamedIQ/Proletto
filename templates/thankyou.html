<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thank You for Supporting Proletto | The Artist Opportunity Platform</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Thank you page specific styles */
        .trial-info {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 10px;
            border-radius: 6px;
            border-left: 4px solid #8E44AD;
            font-weight: bold;
            color: #8E44AD;
            margin: 10px 0;
        }
        .thankyou-container {
            max-width: 800px;
            margin: 60px auto;
            padding: 40px;
            background-color: white;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            text-align: center;
        }
        
        .thankyou-header {
            margin-bottom: 40px;
        }
        
        .thankyou-header h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #8E44AD;
        }
        
        .thankyou-header p {
            font-size: 1.2rem;
            color: #555;
            line-height: 1.6;
        }
        
        .membership-details {
            background-color: #f8f3e6;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 40px;
        }
        
        .membership-badge {
            display: inline-block;
            background: linear-gradient(135deg, #8E44AD 0%, #E84B63 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .account-info {
            margin-bottom: 30px;
        }
        
        .account-info p {
            margin: 5px 0;
            color: #555;
        }
        
        .account-info strong {
            color: #333;
        }
        
        .next-steps {
            margin-bottom: 40px;
        }
        
        .next-steps h2 {
            margin-bottom: 20px;
            font-size: 1.6rem;
            color: #333;
        }
        
        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .step-card {
            padding: 20px;
            border-radius: 8px;
            background-color: white;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .step-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #8E44AD 0%, #E84B63 100%);
            color: white;
            border-radius: 50%;
            margin: 0 auto 15px;
            font-weight: bold;
        }
        
        .step-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .step-description {
            font-size: 0.9rem;
            color: #555;
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }
        
        .action-button {
            display: inline-block;
            padding: 12px 30px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .primary-button {
            background: linear-gradient(135deg, #8E44AD 0%, #E84B63 100%);
            color: white;
        }
        
        .secondary-button {
            background-color: #f8f3e6;
            color: #555;
            border: 1px solid #ddd;
        }
        
        .action-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: fall 5s linear infinite;
            z-index: -1;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <a href="/">
                    <img src="assets/proletto-logo.svg" alt="Proletto Logo" class="main-logo">
                </a>
            </div>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/how-it-works">How It Works</a></li>
                <li><a href="/opportunities">Opportunities</a></li>
                <li><a href="/portfolio">Portfolio Optimizer</a></li>
                <li><a href="/membership">Membership</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="thankyou-container">
            <div class="thankyou-header">
                <h1>Thank You for Supporting Proletto!</h1>
                <p>Your membership helps us build better tools for artists worldwide while giving you access to exclusive features and opportunities.</p>
            </div>
            
            <div class="membership-details">
                <div class="membership-badge">
                    <span id="membership-level">Premium</span> Member
                </div>
                
                <div class="account-info">
                    <p>Account: <strong id="member-email">user@example.com</strong></p>
                    <p>Membership Status: <strong>Active</strong></p>
                    <p id="trial-notice" class="trial-info">Your 14-day free trial has started! Your first payment will be processed on <span id="trial-end-date">May 14, 2025</span>.</p>
                    <p>Next Billing Date: <strong id="next-billing">May 30, 2025</strong></p>
                </div>
            </div>
            
            <div class="next-steps">
                <h2>Here's what you can do next:</h2>
                
                <div class="steps-grid">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <div class="step-title">Browse Opportunities</div>
                        <div class="step-description">Explore our expanded database of opportunities tailored to your membership level.</div>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <div class="step-title">Optimize Your Portfolio</div>
                        <div class="step-description">Use our AI tools to analyze and improve your portfolio for better success rates.</div>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <div class="step-title">Check Your Inbox</div>
                        <div class="step-description">We've sent you a welcome email with useful resources to get started.</div>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <a href="/opportunities" class="action-button primary-button">Browse Opportunities</a>
                <a href="/portfolio" class="action-button secondary-button">Optimize Portfolio</a>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Proletto</h3>
                <p>Proletto is a platform designed to connect visual artists with professional opportunities.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/how-it-works">How It Works</a></li>
                    <li><a href="/opportunities">Opportunities</a></li>
                    <li><a href="/portfolio">Portfolio Optimizer</a></li>
                    <li><a href="/membership">Membership</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact</h3>
                <p>Email: support@myproletto.com</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Proletto. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Get URL parameters
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            const results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }
        
        // Process Stripe checkout completion
        function processStripeCheckout() {
            const sessionId = getUrlParameter('session_id');
            
            if (sessionId) {
                // In production, you would verify the session with your backend
                console.log('Processing Stripe checkout with session ID:', sessionId);
                
                // Get temporary data from localStorage
                const email = localStorage.getItem('proletto_temp_email');
                const name = localStorage.getItem('proletto_temp_name');
                const planLevel = localStorage.getItem('proletto_temp_plan');
                const chosenStates = JSON.parse(localStorage.getItem('proletto_temp_states') || '[]');
                
                if (email && planLevel) {
                    // Update user subscription info
                    userSubscription = {
                        isRegistered: true,
                        email: email,
                        membershipLevel: planLevel,
                        chosenStates: chosenStates
                    };
                    
                    // Save to localStorage (permanent)
                    localStorage.setItem('proletto_email', email);
                    if (name) localStorage.setItem('proletto_name', name);
                    localStorage.setItem('proletto_membership_level', planLevel);
                    localStorage.setItem('proletto_chosen_states', JSON.stringify(chosenStates));
                    
                    // Clear temporary data
                    localStorage.removeItem('proletto_temp_email');
                    localStorage.removeItem('proletto_temp_name');
                    localStorage.removeItem('proletto_temp_plan');
                    localStorage.removeItem('proletto_temp_states');
                    
                    // Register with backend
                    registerWithBackend(email, name, planLevel, chosenStates);
                }
            }
        }
        
        // Register with backend
        function registerWithBackend(email, name, plan, states = []) {
            // Create form data
            const formData = new FormData();
            formData.append('email', email);
            if (name) formData.append('name', name);
            formData.append('plan', plan);
            
            if (states && states.length > 0) {
                formData.append('states', JSON.stringify(states));
            }
            
            // Send to backend
            fetch('/api/upgrade', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                console.log('Registration successful:', data);
            })
            .catch(error => {
                console.error('Registration error:', error);
            });
        }
        
        // Update user details based on localStorage
        document.addEventListener('DOMContentLoaded', function() {
            // Process Stripe checkout if coming from payment
            processStripeCheckout();
            
            // Get user info from localStorage
            const email = localStorage.getItem('proletto_email') || 'user@example.com';
            const membershipLevel = localStorage.getItem('proletto_membership_level') || 'premium';
            
            // Update displayed info
            document.getElementById('member-email').textContent = email;
            document.getElementById('membership-level').textContent = membershipLevel.charAt(0).toUpperCase() + membershipLevel.slice(1);
            
            // Set trial end date (14 days from now)
            const trialEndDate = new Date();
            trialEndDate.setDate(trialEndDate.getDate() + 14);
            
            // Set next billing date (30 days from now)
            const nextBillingDate = new Date();
            nextBillingDate.setDate(nextBillingDate.getDate() + 30);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            
            document.getElementById('trial-end-date').textContent = trialEndDate.toLocaleDateString('en-US', options);
            document.getElementById('next-billing').textContent = nextBillingDate.toLocaleDateString('en-US', options);
            
            // Create celebration confetti
            createConfetti();
        });
        
        // Create confetti animation
        function createConfetti() {
            const colors = ['#E84B63', '#8E44AD', '#e67e22', '#2ecc71', '#3498db', '#f1c40f'];
            const confettiCount = 100;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                
                // Random position, color, size, and animation delay
                const size = Math.random() * 10 + 5;
                confetti.style.width = `${size}px`;
                confetti.style.height = `${size}px`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.animationDelay = `${Math.random() * 5}s`;
                
                document.body.appendChild(confetti);
                
                // Remove confetti after animation completes
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }
    </script>
</body>
</html>